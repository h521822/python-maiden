2020-04-24 16:51:10.341 DEBUG 24436 --- [io-8080-exec-10] n.q.p.w.w.m.o.W.listOutInventory         : ==>  Preparing: SELECT * FROM ( SELECT TMP.*, ROWNUM ROW_ID FROM ( SELECT DISTINCT CASE WHEN (select count(1) from WB_TBL_FUT_PRICE FUT_PRICE left join WB_TBL_FUT_PRICE_JOIN FUT_PRICE_JOIN ON FUT_PRICE.id = FUT_PRICE_JOIN.POINT_ID AND FUT_PRICE_JOIN.DELETE_FLAG = '0' where FUT_PRICE.DELETE_FLAG = '0' and CT_CONTRACT.id = FUT_PRICE.CONTRACT_ID ) = 0 THEN ? ELSE ? END maintainFlag, decode(nvl(FUT_P
RICE.priceFlag ,0),0,?,?) AS priceFlag, OUT_INVENTORY.ID, OUT_INVENTORY.OUT_INVENTORY_NO, OUT_INVENTORY.OUT_INVENTORY_DATE, OUT_INVENTORY.ADJUST_DATE, OUT_INVENTORY.CONTRACT_ID, CT_CONTRACT.CONTRACT_NO, CT_CONTRACT.CREDIT_FLAG AS "conCreditFlag", OUT_INVENTORY.INVOICE_ID, INV_GOODS.INVOICE_NO, OUT_INVENTORY.CUSTOMER_ID, CUS_BASE.CUSTOMER_FULL_NAME, OUT_INVENTORY.PAYMENT_METHOD, OUT_INVENTORY.CREDIT_ID, CREDIT.CREDIT_NO, OUT_INVENTORY.CREDIT_FLAG, OUT_INVENTORY.BUSINESS_EXECUTION, USER_STAFF.STAF
F_NAME, OUT_INVENTORY.CURRENCY, OUT_INVENTORY.EXCHANGE_RATE, OUT_INVENTORY.ORIGINAL_CURRENCY_AMT, OUT_INVENTORY.CUS_CREDIT_ID, OUT_INVENTORY.LOCAL_CURRENCY_AMT, OUT_INVENTORY.INCLUDING_TAX_AMT, OUT_INVENTORY.NO_TAX_AMT, OUT_INVENTORY.TAX, OUT_INVENTORY.RECEIPT_TYPE, OUT_INVENTORY.TRADE_CATEGORY, OUT_INVENTORY.REMARKS, OUT_INVENTORY.APPROVAL_STATUS, APPROVAL_BUSINESS.APPROVAL_GROUP, OUT_INVENTORY.EFFECTIVE_DATE, OUT_INVENTORY.CHANGE_FLAG, OUT_INVENTORY.CHANGE_BEFORE_ID, OUT_INVENTORY_CHANGE.ID AS
 CHANGE_AFTER_ID, CASE WHEN OUT_INVENTORY_CHANGE.ID IS NULL THEN '0' ELSE '1' END AS IS_CHANGED, OUT_INVENTORY.GROUP_ID, OUT_INVENTORY.ORGAN_ID, OUT_INVENTORY.DELETE_FLAG, OUT_INVENTORY.CREATE_USER, OUT_INVENTORY.CREATE_DATE, OUT_INVENTORY.UPDATE_USER, OUT_INVENTORY.UPDATE_DATE, OUT_INVENTORY.VERSION_NUM, OUT_INVENTORY.IS_SYNC, POINT_TABLE.pointDateStr FROM WB_TBL_WH_OUT_INVENTORY OUT_INVENTORY left join (select IN_OUT_ID,IN_OUT_FLAG,COUNT(1) as priceFlag from WB_TBL_WH_FUT_PRICE GROUP BY IN_OUT
_ID,IN_OUT_FLAG) FUT_PRICE on FUT_PRICE .IN_OUT_ID = OUT_INVENTORY.id and LOWER(FUT_PRICE.IN_OUT_FLAG) = 'out' LEFT JOIN WB_TBL_WH_OUT_PRODUCT OUT_PRODUCT ON OUT_PRODUCT.OUT_INVENTORY_ID = OUT_INVENTORY.ID AND OUT_PRODUCT.DELETE_FLAG = '0' LEFT JOIN WB_TBL_WH_OUT_ELEMENT OUT_ELEMENT ON OUT_ELEMENT.OUT_PRODUCT_ID = OUT_PRODUCT.ID AND OUT_ELEMENT.DELETE_FLAG = '0' LEFT JOIN WB_TBL_CT_CONTRACT CT_CONTRACT ON CT_CONTRACT.ID = OUT_INVENTORY.CONTRACT_ID LEFT JOIN WB_TBL_INV_GOODS  
INV_GOODS ON INV_GOOD
S.ID = OUT_INVENTORY.INVOICE_ID LEFT JOIN WB_TBL_CUS_BASE CUS_BASE ON CUS_BASE.ID = OUT_INVENTORY.CUSTOMER_ID LEFT JOIN WB_VIEW_USER_STAFF USER_STAFF ON USER_STAFF.ACCOUNT = OUT_INVENTORY.BUSINESS_EXECUTION LEFT JOIN WB_TBL_DD_APPROVAL_BUSINESS APPROVAL_BUSINESS ON APPROVAL_BUSINESS.BUSINESS_ID = OUT_INVENTORY.ID AND APPROVAL_BUSINESS.BUSINESS_TYPE IN (?,?) AND APPROVAL_BUSINESS.DELETE_FLAG = '0' LEFT JOIN WB_TBL_WH_OUT_INVENTORY OUT_INVENTORY_CHANGE ON OUT_INVENTORY.ID = OUT_INVENTORY_CHANGE.CH
ANGE_BEFORE_ID AND OUT_INVENTORY_CHANGE.DELETE_FLAG ='0' LEFT JOIN WB_TBL_CRE_LETTER_CREDIT CREDIT ON OUT_INVENTORY.CREDIT_ID = CREDIT.ID AND CREDIT.DELETE_FLAG = '0' LEFT JOIN ( SELECT JOIN_TABLE.IN_OUT_ID, LISTAGG(TO_CHAR(JOIN_TABLE.POINT_DATE, 'yyyy-MM-dd'), ',') WITHIN GROUP (ORDER BY TO_CHAR(JOIN_TABLE.POINT_DATE, 'yyyy-MM-dd')) pointDateStr FROM ( SELECT DISTINCT WH_FUT_PRICE.IN_OUT_ID, FUT_PRICE.POINT_DATE FROM WB_TBL_WH_FUT_PRICE WH_FUT_PRICE LEFT JOIN WB_TBL_FUT_PRICE FUT_PRICE ON FUT_P
RICE.ID = WH_FUT_PRICE.POINT_ID AND FUT_PRICE.DELETE_FLAG = '0' WHERE WH_FUT_PRICE.DELETE_FLAG = '0' AND WH_FUT_PRICE.IN_OUT_FLAG = 'OUT' AND WH_FUT_PRICE.TRADE_CATEGORY = ? ) JOIN_TABLE GROUP BY JOIN_TABLE.IN_OUT_ID ) POINT_TABLE ON POINT_TABLE.IN_OUT_ID = OUT_INVENTORY.ID WHERE OUT_INVENTORY.DELETE_FLAG = '0' AND TO_CHAR(OUT_INVENTORY.CREATE_DATE, 'yyyy-MM-dd') >= TO_CHAR(?, 'yyyy-MM-dd') AND OUT_INVENTORY.OUT_INVENTORY_NO LIKE ? AND OUT_INVENTORY.RECEIPT_TYPE = ? AND OUT_INVENTORY.TRADE_CATEG
ORY = ? AND OUT_INVENTORY.ORGAN_ID = ? ORDER BY OUT_INVENTORY.UPDATE_DATE DESC ) TMP WHERE ROWNUM <=20) WHERE ROW_ID > 0 
2020-04-24 16:51:10.345 DEBUG 24436 --- [io-8080-exec-10] n.q.p.w.w.m.o.W.listOutInventory         : ==> Parameters: 否(String), 是(String), 否(String), 是(String), OUT_STORAGE(String), OUT_STORAGE_CHANGE(String), 2(String), 2020-01-01 08:00:00.0(Timestamp), %CU20-JXCL-0319-2%(String), 0(String), 2(String), 1(String)
2020-04-24 16:51:10.390 DEBUG 24436 --- [io-8080-exec-10] n.q.p.w.w.m.o.W.listOutInventory         : <==      Total: 1